<!DOCTYPE HTML>
<!--
	Story by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
	<title>Born.</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<script src='https://api.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.js'></script>
	<link href='https://api.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.css' rel='stylesheet' />
</head>
<!-- paris : 48.860033 2.340371 -->

<body>

	<!-- Wrapper -->
	<div id="wrapper" class="divided">

		<!-- One -->
		<section class="banner style1 orient-left content-align-left image-position-right fullscreen onload-image-fade-in onload-content-fade-right">
			<div id="content" class="content">
				<h1>Born.</h1>


				<p class="major">Décidez  où seront installées les futurs bornes de recharge de la ville de Paris. Un servive proposé par <img style="margin-bottom:-6px" width="200" src="images/logo_mairie_de_paris.jpg"/></p>

				<ul class="actions vertical">
					<li><a onclick="changePage()" href="#first" class="button big wide smooth-scroll-middle">Continuer</a></li>
				</ul>
			</div>
			<div id="map" class="image">

			</div>
			<script>
				mapboxgl.accessToken = 'pk.eyJ1IjoibHVjYXNjb2xvbWVyIiwiYSI6ImNqNGhmMTU5ZzAyOWYycW1rbWNneXF6ZHYifQ.OV_aDIpZ9VLqLQrib1qiTA';
				var map = new mapboxgl.Map({
					center: [2.340371, 48.860033],
					zoom: 11,
					container: 'map',
					style: 'mapbox://styles/mapbox/light-v9'
				});

				function changePage() {
					document.getElementById("content").innerHTML = '<object type="text/html" data="p1.html" ></object>';
				}

				function getLocation() {
					if (navigator.geolocation) {
						navigator.geolocation.getCurrentPosition(showPosition);
					} else {
						alert("Geolocation is not supported by this browser.");
					}
				}
				function showPosition(position) {
					var geojson = {
						"type": "FeatureCollection",
						"features": [
							{
								"type": "Feature",
								"properties": {
									"message": "Foo",
									"iconSize": [60, 60]
								},
								"geometry": {
									"type": "Point",
									"coordinates": [
										position.coords.longitude,
										position.coords.latitude
									]
								}
							}
						]
					};
					geojson.features.forEach(function (marker) {
						var el = document.createElement('div');
						el.className = 'marker';
						el.style.backgroundImage = 'url(./images/marker.png)';
						el.style.width = marker.properties.iconSize[0] + 'px';
						el.style.height = marker.properties.iconSize[1] + 'px';

						el.addEventListener('click', function () {
							window.alert(marker.properties.message);
						});

						new mapboxgl.Marker(el, { offset: [-marker.properties.iconSize[0] / 2, -marker.properties.iconSize[1] / 2] })
							.setLngLat(marker.geometry.coordinates)
							.addTo(map);
					});
					debugger;
					map.flyTo({
						center: [position.coords.longitude, position.coords.latitude],
						zoom: 15,
						bearing: 0,

						// These options control the flight curve, making it move
						// slowly and zoom out almost completely before starting
						// to pan.
						speed: 0.2, // make the flying slow
						curve: 1, // change the speed at which it zooms out

						// This can be any easing function: it takes a number between
						// 0 and 1 and returns another number between 0 and 1.
						easing: function (t) {
							return t;
						}
					});
					//map.zoomTo(15, { duration: 0.5, animate: true });
				}
				getLocation();
			</script>
		</section>



		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		<script src="assets/js/skel.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>

</body>

</html>
